<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pay Class</title>
    {% load static %}
    <link rel="stylesheet" href="/reference/sdks/web/static/styles/code-preview.css" preload>

<!--
    <style>
        /* General form styling */
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            margin: 0;
            padding: 0;
        }

        .form-container {
            max-width: 600px;
            margin: 50px auto;
            background-color: #fff;
            padding: 30px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            border-radius: 8px;
        }

        .form-container h2 {
            text-align: center;
            margin-bottom: 20px;
            color: #333;
        }

        .form-container label {
            display: block;
            font-weight: bold;
            margin-bottom: 8px;
            color: #555;
        }

        .form-container input[type="text"],
        .form-container input[type="number"],
        .form-container input[type="date"],
        .form-container select {
            width: 100%;
            padding: 10px;
            margin-bottom: 15px;
            border: 1px solid #ccc;
            border-radius: 4px;
            box-sizing: border-box;
        }

        .form-container .float-left {
            float: left;
            width: 48%;
            margin-right: 2%;
        }

        .form-container .float-right {
            float: right;
            width: 48%;
        }
          
        
        .form-container button {
            width: 100%;
            padding: 12px;
            background-color: #e67c12;
            border: none;
            color: white;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            border-radius: 4px;
            transition: background-color 0.3s ease;
        }

        .form-container button:hover {
            background-color: #d95d0f;
        }

        .button_top_left{
            float: left;
            width: 20%;

        }
        .form-container p {
            margin-bottom: 10px;
            color: #666;
        }

        @media (max-width: 600px) {
            .form-container {
                padding: 20px;
            }
        }
   
        .dropdown {
            position: relative;
            display: inline-block;
        }

        .dropdown-content {
            display: none;
            position: absolute;
            background-color: white;
            min-width: 160px;
            border: 1px solid #ccc;
            border-radius: 4px;
            z-index: 1;
        }

        .dropdown-content div {
            padding: 8px;
            cursor: pointer;
        }

        .dropdown-content div:hover {
            background-color: #f1f1f1;
        }

        .dropdown:hover .dropdown-content,
        .dropdown input:focus + .dropdown-content {
            display: block;
        }

        input {
            width: 200px;
            padding: 8px;
            box-sizing: border-box;
        }
    </style>
-->   
    
    <!--imports Square's SDK for testing in sandbox env --> 
    <script src="https://sandbox.web.squarecdn.com/v2/square.js"></script>


</head>
<body>
  <div id="payment-form">
    <div type="number" id="payment-status-container"></div>
    <div type="number" id="card-container"></div>
    <button id="card-button" type="button">Pay</button>
  </div>
  <script type="module">
    // initialize square payments object w/ application ID and seller location ID
    const payments = Square.payments('sandbox-sq0idb-l1OvnKtKdAGby_ooCMWr-w', 'LQRBC20NRTG0Y');
    // card instance -- has properties needed to take payment
    const card = await payments.card();
    // card instance attatched to empty DOM element -- payment card form renders into empty elem
    await card.attach('#card-container');

    //
    const cardButton = document.getElementById('card-button');
    cardButton.addEventListener('click', async () => {
      const statusContainer = document.getElementById('payment-status-container');

      try {
        // Retrieves payment from token from card instance by calling tokenize method
        const result = await card.tokenize();
        if (result.status === 'OK') {
          console.log(`Payment token is ${result.token}`);
          statusContainer.innerHTML = "Payment Successful";
        } else {
          let errorMessage = `Tokenization failed with status: ${result.status}`;
          if (result.errors) {
            errorMessage += ` and errors: ${JSON.stringify(
              result.errors
            )}`;
          }

          throw new Error(errorMessage);
        }
      } catch (e) {
        console.error(e);
        statusContainer.innerHTML = "Payment Failed";
      }
    });
  </script>
</body>
<!--
<body>

    <div class="form-container">
    
        <div id="payment-form">
            <div id="payment-status-container"></div>
            <div id="card-container"></div>
            <button id="card-button" type="button">Pay</button>
          </div>

    <!-- initialize Square payment object 
    <script type="module">
        const payments = Square.payments('sandbox-sq0idb-RT3u-HhCpNdbMiGg5aXuVg', 'TC4Z3ZEBKRXRH');
        // create card payment method object: tokenizes card info
        const card = await payments.card();
        // Square's card container form
        await card.attach('#card-container');

        const cardButton = document.getElementById('card-button')
        cardButton.addEventListener('click', async () => {
            const statusContainer = document.getElementById('payment-status-container');

            try{
                const result = await card.tokenize();
                if(result.status === 'OK'){
                    console.log('Payment token is ${result.token}');
                    statusContainer.innerHTML = "Payment Succesful";

                } 
            else {
                let errorMessage = 'Tokenization failed with status: ${result.status}';
                if (result.errors){
                    errorMessage += ' and errors: ${JSON.stringify( result.errors)}';
                }        
            throw new Error(errorMessage);                
            }
        } catch (e){
            console.error(e);
            statusContainer.innerHTML = "Payment Failed";
        }
    });

    </script>
    <!--
        <h2>Payment Information</h2>
        <form method="POST" > 
            {% csrf_token %}

            <label for="test_amount">Test Amount:</label>
            <input type="number" id="test_amount" name="test_amount" required>

            <label for="card_number">Card Number:</label>
            <input type="number" id="card_number" name="card_number" required>
        
        -->
            <!-- Square's card container form -->


            <!--
            <label for="first_name">First Name:</label>
            <input type="text" id="first_name" name="first_name" required>

            <label for="card_number">Card Number:</label>
            <input type="number" id="card_number" name="card_number" size="16"required>

            <label for="card_cvv">CVV:</label>
            <input type="number" id="card_cvv" name="card_cvv" size="3"required>

            <button type="submit">Add Class</button>
            <br>
            </div>
                <div class="form-container">
                <h2>Billing Information</h2>
    
            </div>
            -->
        
            <button type="submit">Submit Payment</button>
        </form>
    
</body>
-->
</html>